{% extends "vistetec/base.html" %}
{% block title %}Mis Donaciones{% endblock %}

{% block extra_css %}
<link href="{{ url_for('static', filename='vistetec/css/student/my_donations.css') }}?v={{ sv('vistetec', 'css/student/my_donations.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="container py-3">
    <!-- Header -->
    <div class="mb-4">
        <h2 class="fw-bold mb-1">Mis Donaciones</h2>
        <p class="text-muted mb-0">Tu historial de generosidad</p>
    </div>

    <!-- Stats -->
    <div class="row g-3 mb-4">
        <div class="col-4">
            <div class="card stat-card border-0 shadow-sm h-100">
                <div class="card-body text-center py-3">
                    <div class="stat-icon mx-auto mb-2" style="background-color: #fdf2f4;">
                        <i class="bi bi-heart-fill" style="color: #8B1538;"></i>
                    </div>
                    <h4 class="fw-bold mb-0" id="statTotal">-</h4>
                    <small class="text-muted">Total</small>
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="card stat-card border-0 shadow-sm h-100">
                <div class="card-body text-center py-3">
                    <div class="stat-icon mx-auto mb-2" style="background-color: #fdf2f4;">
                        <i class="bi bi-bag-heart" style="color: #8B1538;"></i>
                    </div>
                    <h4 class="fw-bold mb-0" id="statGarments">-</h4>
                    <small class="text-muted">Ropa</small>
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="card stat-card border-0 shadow-sm h-100">
                <div class="card-body text-center py-3">
                    <div class="stat-icon mx-auto mb-2" style="background-color: #fff3e0;">
                        <i class="bi bi-box-seam text-warning"></i>
                    </div>
                    <h4 class="fw-bold mb-0" id="statPantry">-</h4>
                    <small class="text-muted">Despensa</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Donation List -->
    <h5 class="fw-bold mb-3">Historial</h5>

    <div id="donationsList">
        <!-- Se llena con JS -->
    </div>

    <!-- Empty State -->
    <div id="emptyState" class="text-center py-5 d-none">
        <i class="bi bi-heart text-muted" style="font-size: 4rem;"></i>
        <h4 class="text-muted mt-3">Aún no has donado</h4>
        <p class="text-muted">Cuando dones ropa o despensa, aparecerá aquí tu historial</p>
    </div>

    <!-- Loading -->
    <div id="loadingState" class="text-center py-5">
        <div class="spinner-border" role="status" style="color: #8B1538;"></div>
        <p class="text-muted mt-2">Cargando donaciones...</p>
    </div>

    <!-- Pagination -->
    <nav id="paginationNav" class="d-flex justify-content-center mt-4 d-none">
        <ul class="pagination" id="pagination"></ul>
    </nav>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='vistetec/js/student/my_donations.js') }}?v={{ sv('vistetec', 'js/student/my_donations.js') }}"></script>
{% endblock %}
